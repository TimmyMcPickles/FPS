[gd_scene load_steps=14 format=3 uid="uid://c7x033y4kqr8q"]

[ext_resource type="PackedScene" uid="uid://dbfdkv62b7gbl" path="res://models/guy/guyV1.glb" id="1_4ra3w"]
[ext_resource type="Script" uid="uid://bwy0h5qjki362" path="res://src/enemy.gd" id="1_5uy6h"]
[ext_resource type="Shader" uid="uid://cb4oajhgi3ms0" path="res://shaders/psx.gdshader" id="1_md0e3"]
[ext_resource type="PackedScene" uid="uid://bsn4cita3mqm3" path="res://scenes/hitbox.tscn" id="2_c4w8v"]
[ext_resource type="PackedScene" uid="uid://kg0le4ychii" path="res://scenes/hurtbox.tscn" id="3_xwavj"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_reen0"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_5uy6h"]
render_priority = 0
shader = ExtResource("1_md0e3")
shader_parameter/paletteswap = false
shader_parameter/snapRes = 50.0

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_5uy6h"]
animation = &"punch"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_4ra3w"]
animation = &"walk"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_5uy6h"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_c4w8v"]
xfade_time = 0.2
advance_mode = 2
advance_condition = &"attack"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_xwavj"]
xfade_time = 0.2
switch_mode = 2
advance_mode = 2
advance_condition = &"run"

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_c4w8v"]
states/punch/node = SubResource("AnimationNodeAnimation_5uy6h")
states/punch/position = Vector2(463, 101)
states/walk/node = SubResource("AnimationNodeAnimation_4ra3w")
states/walk/position = Vector2(332, 101)
transitions = ["Start", "walk", SubResource("AnimationNodeStateMachineTransition_5uy6h"), "walk", "punch", SubResource("AnimationNodeStateMachineTransition_c4w8v"), "punch", "walk", SubResource("AnimationNodeStateMachineTransition_xwavj")]
graph_offset = Vector2(53, -51)

[node name="Enemy" type="CharacterBody3D"]
script = ExtResource("1_5uy6h")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
shape = SubResource("CapsuleShape3D_reen0")

[node name="hitbox" parent="." instance=ExtResource("2_c4w8v")]

[node name="hurtbox" parent="." instance=ExtResource("3_xwavj")]

[node name="Character_Base" parent="." instance=ExtResource("1_4ra3w")]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 0, 0)

[node name="Skeleton3D" parent="Character_Base/rig" index="0"]
bones/1/position = Vector3(0.00174784, -0.100626, 0.90776)
bones/1/rotation = Quaternion(0.662862, -0.00741437, -0.00211853, 0.748702)
bones/2/rotation = Quaternion(0.040102, 0.00177103, -0.00590313, 0.999177)
bones/2/scale = Vector3(1.00145, 0.997108, 1.00145)
bones/3/rotation = Quaternion(0.16857, 0.00451963, 0.0064145, 0.985658)
bones/3/scale = Vector3(1.18947, 0.707182, 1.19004)
bones/4/rotation = Quaternion(-0.148395, 0.134571, -0.0390736, 0.97895)
bones/4/scale = Vector3(0.845831, 1.38455, 0.890539)
bones/5/rotation = Quaternion(0.216862, -0.0680231, 0.0141057, 0.973727)
bones/5/scale = Vector3(1, 1, 1)
bones/6/rotation = Quaternion(-0.092573, 1.80902e-07, 4.41471e-07, 0.995706)
bones/6/scale = Vector3(0.999999, 1, 0.999999)
bones/7/rotation = Quaternion(-0.114979, -0.0685202, 0.0113502, 0.990937)
bones/7/scale = Vector3(1, 0.999998, 1)
bones/8/position = Vector3(0.31203, 0.255103, 1.37688)
bones/8/rotation = Quaternion(-0.104869, 0.964895, -0.0631329, 0.232365)
bones/8/scale = Vector3(1, 14.7832, 1)
bones/9/position = Vector3(-0.442985, -0.179594, 1.29439)
bones/9/rotation = Quaternion(-0.14749, 0.988972, -0.00998307, 0.00907569)
bones/9/scale = Vector3(1, 20.0731, 1)
bones/10/position = Vector3(0.204337, -0.273619, 0.575276)
bones/10/rotation = Quaternion(0.749391, 0.345191, -0.564005, 0.0339722)
bones/10/scale = Vector3(1, 14.8357, 1)
bones/11/position = Vector3(-0.268819, -0.110311, 0.552465)
bones/11/rotation = Quaternion(0.833477, -0.259755, 0.487333, -0.018735)
bones/11/scale = Vector3(1, 16.6931, 1)
bones/14/position = Vector3(0.00146018, -0.0559061, 0.143953)
bones/14/rotation = Quaternion(0.104584, -0.00543375, -0.00603205, 0.994483)
bones/15/position = Vector3(0.00146018, -0.0559061, 0.143953)
bones/15/rotation = Quaternion(0.0440699, 0, 0, 0.999028)
bones/16/position = Vector3(0.00146018, -0.0230281, 0.172766)
bones/16/rotation = Quaternion(0.052362, -0.00272047, -0.00302152, 0.99862)
bones/18/position = Vector3(0.000299882, -0.15575, 0.0359175)
bones/18/rotation = Quaternion(-0.709979, -0.00738932, 0.00408631, 0.704172)
bones/19/rotation = Quaternion(0.580936, 0.000471664, -0.000417046, 0.813949)
bones/26/rotation = Quaternion(0.964885, 0.059119, -0.176171, 0.185649)
bones/26/scale = Vector3(0.985623, 0.985623, 0.985623)
bones/27/rotation = Quaternion(0.337574, -1.19773e-09, 6.45358e-09, 0.941299)
bones/27/scale = Vector3(0.999445, 0.999445, 0.999445)
bones/28/rotation = Quaternion(-0.673972, 0.115675, 0.0860945, 0.724548)
bones/28/scale = Vector3(1.01458, 1.01458, 1.01457)
bones/29/position = Vector3(-0.00142607, 0.25464, -0.0178971)
bones/29/rotation = Quaternion(-0.0358198, 0.978729, -0.201874, -0.00737506)
bones/33/scale = Vector3(1.01458, 1.01457, 1.01458)
bones/35/rotation = Quaternion(-2.66073e-08, 0.0670025, -1.5242e-08, 0.997753)
bones/35/scale = Vector3(1.01458, 1.01457, 1.01458)
bones/37/scale = Vector3(1.01459, 1.01459, 1.01459)
bones/38/rotation = Quaternion(-8.70585e-08, 0.016525, 3.42912e-10, 0.999864)
bones/38/scale = Vector3(1.01459, 1.01459, 1.01459)
bones/40/position = Vector3(-0.120967, 0.0662979, -0.0243575)
bones/40/rotation = Quaternion(0.973396, -0.173144, 0.148696, 0.020291)
bones/40/scale = Vector3(0.968573, 0.968573, 0.968573)
bones/41/rotation = Quaternion(0.609876, -5.20563e-08, 8.32793e-08, 0.792497)
bones/41/scale = Vector3(0.998902, 0.998903, 0.998902)
bones/42/rotation = Quaternion(-0.555056, -0.197725, -0.0128966, 0.807868)
bones/42/scale = Vector3(1.03327, 1.03327, 1.03327)
bones/43/position = Vector3(-9.90093e-06, 0.241448, 0.000178827)
bones/47/scale = Vector3(1.03327, 1.03327, 1.03327)
bones/49/rotation = Quaternion(1.36957e-07, -0.108736, 3.85795e-08, 0.994071)
bones/49/scale = Vector3(1.03327, 1.03327, 1.03327)
bones/51/scale = Vector3(1.03245, 1.03245, 1.03245)
bones/52/rotation = Quaternion(8.44425e-09, 0.00228983, 2.24008e-08, 0.999997)
bones/52/scale = Vector3(1.03245, 1.03245, 1.03245)
bones/54/rotation = Quaternion(0.972741, 0.0866944, 0.120624, -0.178068)
bones/60/rotation = Quaternion(-0.0358198, 0.978728, -0.201874, -0.00737491)
bones/62/rotation = Quaternion(-0.806391, -0.139282, 0.148879, 0.55513)
bones/63/rotation = Quaternion(-0.17267, 0.0182408, 0.00319825, 0.984806)
bones/63/scale = Vector3(0.985623, 0.985624, 0.985623)
bones/64/rotation = Quaternion(0.337574, -1.10941e-08, 5.78123e-10, 0.941299)
bones/64/scale = Vector3(0.999445, 0.999445, 0.999445)
bones/65/rotation = Quaternion(0.970035, 0.0650799, -0.145137, 0.183661)
bones/67/rotation = Quaternion(0.970035, 0.0650798, -0.145137, 0.183661)
bones/67/scale = Vector3(1.00727, 0.985623, 1.00727)
bones/68/rotation = Quaternion(-3.67149e-08, -0.0155546, 3.4671e-08, 0.999879)
bones/69/rotation = Quaternion(0.337533, -0.015492, 0.00551118, 0.94117)
bones/69/scale = Vector3(0.999994, 0.991356, 1.00896)
bones/70/rotation = Quaternion(-2.917e-08, 0.0125402, -3.80355e-09, 0.999921)
bones/71/rotation = Quaternion(-0.699649, 0.105821, 0.0831326, 0.7017)
bones/71/scale = Vector3(0.965934, 1.05101, 0.985028)
bones/72/rotation = Quaternion(-0.0334167, 0.985226, -0.167833, -0.00673089)
bones/72/scale = Vector3(1.02816, 0.955152, 1.01974)
bones/73/rotation = Quaternion(0.972881, -0.0854502, -0.120567, -0.177944)
bones/81/rotation = Quaternion(-0.580403, 0.223284, -0.103617, 0.776235)
bones/82/position = Vector3(1.69966e-08, -1.17347e-07, 5.14556e-08)
bones/82/rotation = Quaternion(-0.324752, -0.0175149, -0.0060152, 0.945618)
bones/82/scale = Vector3(0.968573, 0.968574, 0.968573)
bones/83/rotation = Quaternion(0.609876, -4.34031e-08, 7.67949e-08, 0.792497)
bones/83/scale = Vector3(0.998903, 0.998903, 0.998902)
bones/84/position = Vector3(-0.120967, 0.0662978, -0.0243575)
bones/84/rotation = Quaternion(0.972778, -0.173057, 0.152684, 0.0210016)
bones/86/position = Vector3(-0.120967, 0.0662979, -0.0243574)
bones/86/rotation = Quaternion(0.972778, -0.173057, 0.152685, 0.0210017)
bones/86/scale = Vector3(1.0161, 0.968573, 1.0161)
bones/87/rotation = Quaternion(-3.83254e-08, -0.0018095, -1.15526e-08, 0.999998)
bones/87/scale = Vector3(0.999983, 1, 0.999951)
bones/88/rotation = Quaternion(0.609769, -0.001797, 0.00139825, 0.792576)
bones/88/scale = Vector3(1.0004, 0.955812, 1.04613)
bones/89/rotation = Quaternion(-1.75353e-08, -0.0544122, 4.6609e-08, 0.998519)
bones/90/rotation = Quaternion(-0.55516, -0.154105, 0.0187876, 0.817127)
bones/90/scale = Vector3(0.98583, 0.991307, 1.02407)
bones/91/rotation = Quaternion(0.0358371, 0.978653, -0.202237, 0.00738431)
bones/91/scale = Vector3(1.00024, 0.999636, 1.00013)
bones/95/position = Vector3(0.00146018, -0.0230281, 0.172766)
bones/95/rotation = Quaternion(0.0220403, 0, 0, 0.999757)
bones/96/position = Vector3(4.77361e-10, 0.0053474, -0.0592672)
bones/96/rotation = Quaternion(0.711663, -0.00240419, 0.00284283, 0.702511)
bones/97/position = Vector3(0.000218476, 0.0296649, 0.00229001)
bones/97/rotation = Quaternion(0.0651652, -0.00217243, -0.00744486, 0.997844)
bones/98/rotation = Quaternion(-0.0500164, 0.000806133, 0.00893315, 0.998708)
bones/100/position = Vector3(-0.000232729, 0.155983, 0.0332481)
bones/100/rotation = Quaternion(-0.696006, 0.00234095, -0.00289513, 0.718026)
bones/101/position = Vector3(-1.7971e-11, 9.02679e-09, 1.08236e-07)
bones/101/rotation = Quaternion(0.676685, 0.101762, 0.0940372, 0.723118)
bones/102/rotation = Quaternion(0.216862, -0.0680231, 0.0141057, 0.973727)
bones/102/scale = Vector3(1, 1, 1)
bones/103/rotation = Quaternion(-0.092573, 1.80857e-07, 4.41418e-07, 0.995706)
bones/103/scale = Vector3(0.999999, 1, 0.999999)
bones/104/rotation = Quaternion(-0.114979, -0.0685202, 0.0113502, 0.990937)
bones/104/scale = Vector3(1, 0.999998, 1)
bones/105/rotation = Quaternion(-0.697432, -0.048954, -0.0492912, 0.713276)
bones/106/rotation = Quaternion(0.811797, 2.76976e-07, 6.24089e-08, 0.58394)
bones/107/rotation = Quaternion(-0.822428, -0.0574691, -0.0390018, 0.564614)
bones/108/position = Vector3(-1.15906e-10, 1.74131e-08, 6.15045e-08)
bones/108/rotation = Quaternion(0.722241, -1.67647e-07, -6.77814e-08, 0.691641)
bones/110/rotation = Quaternion(-2.08849e-07, -1.35333e-09, 2.85215e-09, 1)
bones/110/scale = Vector3(1, 1, 1)
bones/111/rotation = Quaternion(0.0108196, -2.62744e-10, -2.71807e-13, 0.999941)
bones/111/scale = Vector3(1, 0.999999, 1)
bones/115/rotation = Quaternion(-0.460104, -0.513263, -0.459437, 0.560164)
bones/116/rotation = Quaternion(-0.511729, 0.73272, -0.206084, 0.398476)
bones/116/scale = Vector3(0.982894, 0.982894, 0.982894)
bones/117/rotation = Quaternion(0.373786, 1.54489e-07, -1.27486e-07, 0.927515)
bones/117/scale = Vector3(0.998825, 0.998825, 0.998825)
bones/118/rotation = Quaternion(-0.384314, 0.168597, -0.0388241, 0.906847)
bones/118/scale = Vector3(1.01861, 1.01861, 1.01861)
bones/121/scale = Vector3(1.01861, 1.01861, 1.01861)
bones/123/rotation = Quaternion(-2.40932e-07, 0.0880882, -4.5506e-08, 0.996113)
bones/123/scale = Vector3(1.01861, 1.01861, 1.01861)
bones/125/scale = Vector3(1.01741, 1.01741, 1.01741)
bones/126/rotation = Quaternion(2.86943e-08, 0.00951034, 1.88003e-08, 0.999955)
bones/126/scale = Vector3(1.01741, 1.01741, 1.01741)
bones/135/rotation = Quaternion(-0.198501, -0.773342, 0.573239, -0.184216)
bones/136/rotation = Quaternion(-0.185014, 0.00384027, 0.00072312, 0.982728)
bones/136/scale = Vector3(0.982894, 0.982894, 0.982895)
bones/137/rotation = Quaternion(0.373786, 1.53562e-07, -1.40527e-07, 0.927515)
bones/137/scale = Vector3(0.998824, 0.998825, 0.998825)
bones/138/rotation = Quaternion(-0.507898, 0.739875, -0.215425, 0.384989)
bones/140/rotation = Quaternion(-0.507898, 0.739875, -0.215425, 0.384989)
bones/140/scale = Vector3(1.00867, 0.982894, 1.00867)
bones/141/rotation = Quaternion(1.99403e-08, -0.00879288, 9.60855e-08, 0.999961)
bones/142/rotation = Quaternion(0.373757, -0.00875128, 0.00356499, 0.927479)
bones/142/scale = Vector3(1.00059, 0.986331, 1.01361)
bones/143/rotation = Quaternion(7.03065e-09, 0.0846272, -1.63857e-07, 0.996413)
bones/144/rotation = Quaternion(-0.379622, 0.0895975, -0.0718595, 0.917984)
bones/144/scale = Vector3(0.991991, 1.00442, 1.00406)
bones/145/rotation = Quaternion(-0.460295, 0.513086, 0.459608, 0.560029)
bones/146/rotation = Quaternion(-0.365995, -0.630941, 0.377279, 0.570633)
bones/146/scale = Vector3(0.974102, 0.974102, 0.974102)
bones/147/rotation = Quaternion(0.497233, -2.15325e-07, 1.13974e-07, 0.867617)
bones/147/scale = Vector3(0.998294, 0.998294, 0.998294)
bones/148/rotation = Quaternion(-0.210909, 0.234371, 0.101111, 0.943591)
bones/148/scale = Vector3(1.02861, 1.02861, 1.02861)
bones/151/scale = Vector3(1.02861, 1.02861, 1.02861)
bones/153/rotation = Quaternion(-3.04059e-07, 0.119724, 4.65367e-08, 0.992807)
bones/153/scale = Vector3(1.02861, 1.02861, 1.02861)
bones/155/scale = Vector3(1.02659, 1.02659, 1.02659)
bones/156/rotation = Quaternion(-3.92206e-08, -0.0184499, -1.60763e-07, 0.99983)
bones/156/scale = Vector3(1.02659, 1.02659, 1.02659)
bones/165/rotation = Quaternion(0.26002, -0.503986, 0.809829, 0.150218)
bones/166/rotation = Quaternion(-0.249675, -0.00378391, -0.000975929, 0.968322)
bones/166/scale = Vector3(0.974102, 0.974102, 0.974102)
bones/167/rotation = Quaternion(0.497233, -2.24712e-07, 1.15507e-07, 0.867617)
bones/167/scale = Vector3(0.998294, 0.998294, 0.998294)
bones/168/rotation = Quaternion(-0.352845, -0.650233, 0.389611, 0.548544)
bones/170/rotation = Quaternion(-0.352845, -0.650233, 0.389611, 0.548544)
bones/170/scale = Vector3(1.01321, 0.974102, 1.01321)
bones/171/rotation = Quaternion(-3.40195e-08, 0.015975, 3.61099e-08, 0.999872)
bones/172/rotation = Quaternion(0.497048, 0.0158209, -0.00914948, 0.867531)
bones/172/scale = Vector3(1.00099, 0.969465, 1.03109)
bones/173/rotation = Quaternion(4.91715e-09, 0.123173, -7.58639e-08, 0.992385)
bones/174/rotation = Quaternion(-0.222167, 0.117162, 0.0729325, 0.965192)
bones/174/scale = Vector3(0.986373, 1.01991, 0.994624)
bones/175/rotation = Quaternion(-0.460104, -0.513263, -0.459437, 0.560164)
bones/176/rotation = Quaternion(-0.460295, 0.513086, 0.459608, 0.560029)
bones/179/position = Vector3(-0.00976397, 0.358594, 0.0469791)
bones/179/rotation = Quaternion(-0.128407, -0.93478, 0.311163, -0.113469)
bones/181/position = Vector3(0.215598, 1.28151, -0.797148)
bones/181/rotation = Quaternion(-0.66872, 0.1006, 0.0952493, 0.730494)
bones/184/position = Vector3(0.0411533, -0.420803, 0.0905004)
bones/184/rotation = Quaternion(0.0906934, -0.492533, 0.865319, -0.0202211)
bones/186/position = Vector3(-0.664172, 1.27729, -0.546133)
bones/186/rotation = Quaternion(-0.66872, 0.1006, 0.0952493, 0.730494)
bones/187/rotation = Quaternion(-0.337003, 5.05357e-08, 0.939611, -0.0596658)
bones/189/position = Vector3(-0.1005, -0.247516, 0.00013563)
bones/189/rotation = Quaternion(-0.0756306, 0, 0, 0.997136)
bones/196/rotation = Quaternion(0.978729, 0.0358198, -0.00737504, -0.201874)
bones/200/position = Vector3(0.589718, 0.341179, 0.800141)
bones/200/rotation = Quaternion(-0.629253, -0.00810756, -0.000423047, 0.777158)
bones/203/position = Vector3(0.1005, 0.232283, 0.231967)
bones/203/rotation = Quaternion(0.530832, 0, 0, 0.847477)
bones/210/rotation = Quaternion(0.978729, -0.0358198, 0.00737505, -0.201874)
bones/213/rotation = Quaternion(1.351e-07, -7.45058e-09, 1, -2.54614e-15)
bones/214/position = Vector3(-0.592663, 0.330135, 0.784636)
bones/214/rotation = Quaternion(-0.629253, -0.00810756, -0.000423047, 0.777158)

[node name="Cube" parent="Character_Base/rig/Skeleton3D" index="0"]
material_override = SubResource("ShaderMaterial_5uy6h")

[node name="NavigationAgent3D" type="NavigationAgent3D" parent="."]
path_height_offset = 0.5

[node name="AnimationTree" type="AnimationTree" parent="."]
root_node = NodePath("../Character_Base")
tree_root = SubResource("AnimationNodeStateMachine_c4w8v")
anim_player = NodePath("../Character_Base/AnimationPlayer")
parameters/conditions/attack = false
parameters/conditions/run = false

[editable path="hitbox"]
[editable path="hurtbox"]
[editable path="Character_Base"]
